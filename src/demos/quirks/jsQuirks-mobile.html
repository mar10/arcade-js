<!DOCTYPE html>
<html>
<head>
    <title>jsQuirks - Mobile</title>
    <!-- 
    <link href="../../depends/sample.css" rel="stylesheet" media="screen and (min-width:481px)">
    <link href="iphone.css" rel="stylesheet" media="only screen and (max-width:480px)">
     -->
    <link href="iphone.css" rel="stylesheet">
	<script src="../../depends/jquery.js"></script>
	<script src="../../depends/jquery.mousewheel.js"></script>

	<script src="../../lina.js/lina.js"></script>
    <script src="../../arcade.js/arcade.js"></script>
    <script src="../../arcade.js/arcade-controls.js"></script>

	<script src="jsQuirks.js"></script>

    <!-- Safari/iPhone: Display web content in full-screen mode: -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- Safari/iPhone: Hide status bar (requires full-screen mode) -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <!-- Safari/iPhone: Set fixed viewport -->
	<meta name="viewport" content="user-scalable = no, width = device-width">
    <!-- Safari/iPhone: Define App icon: -->
	<link rel="apple-touch-icon" href="apple-touch-icon.png" />

	<script type="text/javascript"><!--
	// http://articles.sitepoint.com/article/iphone-development-12-tips/
	
	$(function(){
        $("#btnLandscape").click(function(){$("body").removeClass("portrait").addClass("landscape");});
        $("#btnPortrait").click(function(){$("body").removeClass("landscape").addClass("portrait");});
		var canvas = document.getElementById("canvas1");
		var game = new QuirksGame(canvas, {
			debug: {showFps: true}
			});
        // Add iPod extensions
        var stick = game.addObject(new TouchStick({
            pos: new Point2(60, canvas.height - 60),
            r1: 10,
            r2: 30
        }));
        var btn1 = game.addObject(new TouchButton({
            pos: new Point2(canvas.width - 40, canvas.height - 40),
            r: 20
        }));
        game.onResize = function(e, width, height){
            game.debug("onResize: " + width + " x " + height);
            // Adjust controls that are relative to right or bottom border 
            stick.pos = new Point2(60, height - 60);
            btn1.pos = new Point2(width - 40, height - 40);
            // Let ArcadeGame adjust canvas size to new dimensions
            return true; 
        };
		// Evaluate orientation changes
        $(window).live("onorientationchange", function(e) {
            game.debug("onorientationchange: e=" + e);
            alert("ooc");
            if(Math.abs(window.orientation) === 90){
//                $("body").removeClass("portrait").addClass("landscape");
            }else{
//                $("body").removeClass("landscape").addClass("portrait");
            }
            game.debug("onorientationchange: class=" + $("body").attr("class") + ", e=" + e);
            // Scroll one pixel down, so Safari URL toolbar disappears
            setTimeout(scrollTo, 10, 0, 1);
        });
        if(window.orientation !== undefined)
            $(window).trigger("onorientationchange");
	});
	--></script>
</head>
<body>
<!--
<div class="box">
     <h1>jsQuirks</h1>
    <a href="http://arcade-js.googlecode.com/">jsQuirks - iPhone edition</a>
</div>
-->
<div class="arcade-js">
    <canvas id="canvas1" class="arcade-js">This game requires HTML 5 support.</canvas>
</div>
<button id="btnLandscape">Landscape</button>
<button id="btnPortrait">Portrait</button>
</body>
</html>
